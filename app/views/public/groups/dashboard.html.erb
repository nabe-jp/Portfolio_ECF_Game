<div class="container dashboard-group">
  <h1 class="dashboard-group__title text-center mb-4">
    <%= @group.name %>
  </h1>

  <div class="dashboard-group__info position-relative mb-4">
    <div class="row">
      <div class="col-md-4">
        <%= image_tag @group.group_image, class: "img-fluid rounded" %>
      </div>
      <div class="col-md-8">
        <p class="dashboard-group__description"><%= @group.description %></p>
      </div>
    </div>

    <!-- 右下に編集ボタンを配置 -->
    <% if current_user.id == @group.owner_id %>
      <div class="position-absolute" style="bottom: 0; right: 0;">
        <%= link_to "グループを編集", edit_group_path(@group), class: "btn btn-outline-primary btn-sm" %>
      </div>
    <% end %>
  </div>

  <hr>

  <!-- お知らせボード -->
  <%= render 'public/shared/group/events' %>

  <hr>

  <!-- イベントボード -->
  <%= render 'public/shared/group/notices' %>

  <hr>

  <!-- メンバー一覧 -->
  <div class="dashboard-group__members mb-5">
    <h3 class="dashboard-group__section-title">メンバー一覧</h3>
    <ul class="dashboard-group__list list-inline">
      <% @group.members.each do |member| %>
        <li class="list-inline-item mr-3"><%= member.nickname %></li>
      <% end %>
    </ul>
  </div>

  <div class="dashboard-group__link-right">
    <%= link_to "▶︎ メンバー一覧(現在未実装)", "#", 
    class: "dashboard-group__more-link disabled-link", onclick: "return false;" %>
  </div>
  <hr>

  <!-- 投稿一覧 -->
  <div class="dashboard-group__posts mb-5">
    <h3 class="dashboard-group__section-title">投稿一覧</h3>
    <% if @group_posts.any? %>
      <ul class="dashboard-group__list list-unstyled">
        <% @group_posts.each do |post| %>
          <li class="dashboard-group__list-item mb-3">
            <%= link_to post.title, group_post_path(@group, post), class: "font-weight-bold text-dark", style: "text-decoration: none;" %>
            <% if post.is_pinned %>
              <span class="ml-2 text-warning">📌 ピン留め</span>
            <% end %>
            <br>
            <small class="text-muted">投稿日: <%= l(post.posted_at || post.created_at, format: :short) %></small>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted">まだ投稿がありません。</p>
    <% end %>
    <div class="dashboard-group__link-right">
      <%= link_to "▶︎ 投稿一覧(現在未実装)", "#", 
      class: "dashboard-group__more-link disabled-link", onclick: "return false;" %>
    </div>
  </div>
</div>
