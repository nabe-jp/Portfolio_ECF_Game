/*    投稿の設定    */
// 投稿フォームのボックスの設定
.user-post-form {
  --user-post-form-font-main: 1rem;
  --user-post-form-font-sub: 0.9rem;

  max-width: 600px;
  margin: 0 auto;                     // 上下左右中央揃え
  padding: 2rem;                      // 内側の余白

  // 各ボックスの設定
  &__title-box,
  &__image-box,
  &__body-box {
    margin-bottom: 1.5rem;              // 各項目間の余白
  }

  // 各ラベルの設定
  &__title-box label,
  &__image-box label,
  &__body-box label {
    width: 100%;
    display: block;                     // ラベルをブロック要素にして、上の内容と改行を確保
    font-weight: bold;                  // ラベルを太字
    font-size: var(--user-post-form-font-main);
    margin-bottom: 0.5rem;              // ラベルと入力フィールドの間隔
    box-sizing: border-box;
  }

  // 入力フォーム内の共通設定
  &__title-input, 
  &__image-input, 
  &__body-input {
    width: 100%;
    font-size: var(--user-post-form-font-sub);
  }

  &__title-input, 
  &__body-input {
    padding: 5px 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  // 画像の入力フィールド
  &__image-input {
    padding: 0;                         // 内側の余白をなくす
    color: #333;
    border: none;                       // 枠線を消す
    background: none;                   // 背景を消す
    box-shadow: none;                   // ボックスシャドウを消す
  }

  // 投稿内容の設定
  &__body-input {
    height: 80px;
  }
}

/*    ユーザー投稿一覧の設定    */
// ページタイトルのボックスの設定
.user-posts__title-box {
  margin-bottom: 1.5rem;                // タイトル下に余白を追加
  padding: 0.75rem 1.5rem;
  background-color: rgba(108, 136, 160, 0.8);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

// 投稿のリンクの設定
.user-posts__item {
  --user-post-font-main: 1rem;
  --user-post-font-sub: 0.8rem;

  .user-posts__link {
    display: flex;
    flex-direction: row;                // 横並びに変更
    justify-content: center;            // 中央揃えにする
    align-items: center;                // 縦方向の中央揃え
    box-sizing: border-box;             // paddingとborderは幅に含める(marginは含まれない)
    width: 95%;
    height: 200px;                      // 高さ固定
    padding: 1rem;                      // 内側の余白
    margin: 1rem;                       // ボックス間のスペース
    text-decoration: none;              // リンクの下線を消す
    color: inherit;                     // 親要素の色を継承
    background-color: rgba(240, 250, 255, 0.7);
    border: 1px solid #000;           // ボックスの枠線
    border-radius: 8px;                 // 角を丸める
    overflow: hidden;                   // 内容がはみ出さないように制御
    transition: background-color 0.3s, transform 0.3s;
  }

  // マウスオーバー時のスタイル
  .user-posts__link:hover {
    color: #f8f9fa;                   // 文字色を青色に変更
    background-color: #a5c663;        // 背景色を変更
    text-decoration: none;              // ホバー時の下線を消す 
    transform: scale(1.05);             // 大きさを1.05倍にする
  }

  // post-list__dateは文字色を直接指定しているため上記の記載では変更されないので直接設定
  .user-posts__link:hover .post-list__date {
    color: #f8f9fa;
  }

  // 投稿ボックスの設定
  .post-list {
    display: flex;                      // 横並びにする
    flex-wrap: nowrap;                  // 折り返し防止
    width: 95%;
  }

  // 左右のボックスの共通設定
  .post-list__image-box,
  .post-list__content-box {
    height: 150px;
  }

  // 左側：画像エリア
  .post-list__image-box {
    display: flex;
    flex: 0 0 45%;                      // 左右でボックスを分ける(相方はflex 1で常に残りの要素を使用)
    justify-content: center;            // 横方向の中央揃え
    align-items: center;                // 縦方向の中央揃え
  }

  // 投稿画像の設定
  .post-list__image {
    max-width: 100%;                    // 親要素を超えないように最大幅を設定
    width: 150px;
    aspect-ratio: 1 / 1;                // 幅に応じて高さを自動で決定(正方形)
    border-radius: 8px;
    object-fit: cover;
  }

  // 右側：情報エリア
  .post-list__content-box {
    flex: 1;                            // 左のボックスで使用しなかった幅を常に使用
    min-width: 0;                       // flex: 1を使うとデフォルトでmin-width: auto;になるので解除
    display: flex;
    flex-direction: column;             // 縦並びにする
    position: relative;                 // 子要素の絶対位置基準
  }

  // はみ出した部分を隠し...表示、大きさにpaddingとborderは幅に含める
  .post-list__item-label, 
  .post-list__user, 
  .post-list__title, 
  .post-list__description, 
  .post-list__date {
    max-width: 100%;
    box-sizing: border-box;             // paddingとborderは幅に含める(marginは含まれない)
    overflow: hidden;                   // はみ出した部分は非表示
    text-overflow: ellipsis;            // 省略文字「...」を表示
    line-height: 1.1;                   // 行の高さ(1はフォントサイズと同じ高さの行ボックスを使う)
  }

  // 左側の空白
  .post-list__user, 
  .post-list__title, 
  .post-list__description {
    padding-left: 0.8rem;
  }

  // フォントサイズ
  .post-list__user, 
  .post-list__title, 
  .post-list__description {
    font-size: var(--user-post-font-main);
  }
  .post-list__item-label, 
  .post-list__date {
    font-size: var(--user-post-font-sub);
  }

  // フォントの太さ
  .post-list__user, 
  .post-list__title {
    font-weight: bold;
  }

  // 高さと折り返しのなし
  .post-list__user, 
  .post-list__title {
    height: 15%;
    white-space: nowrap;                // 1行で表示
  }
  .post-list__item-label, 
  .post-list__date {
    height: 10%;
    white-space: nowrap;                // 1行で表示
  }

  // 内容のスタイル
  .post-list__description {
    display: -webkit-box;
    -webkit-line-clamp: 2;              // 最大2行まで表示
    -webkit-box-orient: vertical;
    white-space: normal;                // 折り返しを許可
  }

  // 更新日のスタイル
  .post-list__date {
    position: absolute;
    bottom: 0;
    padding-left: 0.4rem;
    color: gray;
  }
}

.user-post-show {
  --user-post-show-font-user-nickname: 1rem;
  --user-post-show-font-post-title: 1.1rem;
  --user-post-show-font-post-body: 0.9rem;

  &__item {
    width: 100%;
  }

  // 投稿画像の設定
  &__post-image {
    max-width: 100%;                    // 親要素を超えないように最大幅を設定
    width: 400px;
    aspect-ratio: 1 / 1;                // 幅に応じて高さを自動で決定(正方形)
    border-radius: 8px;
    object-fit: cover;
  }

  &__user-image {
    width: 40px;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    object-fit: cover;
  }

  &__user-nickname, 
  &__post-title {
    max-width: 100%;
    box-sizing: border-box;             // paddingとborderは幅に含める(marginは含まれない)
    line-height: 1.1;                   // 行の高さ(1はフォントサイズと同じ高さの行ボックスを使う)
    font-weight: bold;
    white-space: nowrap;                // 1行で表示
    overflow: hidden;                   // はみ出した部分は非表示
    text-overflow: ellipsis;            // 省略文字「...」を表示
  }

  &__user-nickname {
    font-size: var(--user-post-show-font-user-nickname);
  }

  &__post-title {
    font-size: var(--user-post-show-font-post-title);
  }

  &__post-body {
    font-size: var(--user-post-show-font-post-body);
  }
}

// レスポンシブ調整
@media (max-width: 1024px) {
  .user-post-form {
    --user-post-form-font-main: 0.9rem;
    --user-post-form-font-sub: 0.8rem;
  }

  .user-posts__title-box {
    margin-bottom: 1rem;
    padding: 0.5rem 1rem;
    border-radius: 6.5px;
  }

  .user-posts__item {
    --user-post-font-main: 0.9rem;
    --user-post-font-sub: 0.75rem;

    .col-sm-6 {
      padding: 0;
    }

    .user-posts__link {
      padding: 0.5rem;
      margin: 0.5rem 0;
    }

    .post-list__image, 
    .post-detail__image {
      width: 120px;
    }
  }
}

@media (max-width: 768px) {
  .user-post-form {
    --user-post-form-font-main: 0.8rem;
    --user-post-form-font-sub: 0.7rem;
  }

  .user-posts__title-box {
    margin-bottom: 0.75rem;
    padding: 0.4rem 0.8rem;
    border-radius: 5px;
  }

  .user-posts__item {
    --user-post-font-main: 0.75rem;
    --user-post-font-sub: 0.675rem;

    .user-posts__link {
      height: 150px;
      padding: 0.25rem;
    }

    .post-list__image-box {
      flex: 0 0 40%;
    }

    .post-list__image-box,
    .post-list__content-box {
      height: 120px;
    }

    .post-list__image, 
    .post-detail__image {
      width: 95px;
    }
  }
}

// viewでsmでのブレイクポイントを設定し、1列に2個表示から1個表示に変更しているため、対応するSCSSを追加
@media (max-width: 576px) {
  .user-posts__title-box {
    margin-bottom: 0.65rem;
    padding: 0.35rem 0.7rem;
    border-radius: 4.5px;
  }

  .user-posts__item {
    --user-post-font-main: 0.8rem;
    --user-post-font-sub: 0.7rem;

    .post-list__image-box {
      flex: 0 0 45%;                    // メディアクエリ(768px)で変更した箇所の初期化
    }

    .post-list__image, 
    .post-detail__image {
      width: 120px;
    }
  }
}

@media (max-width: 480px) {
  .user-posts__title-box {
    margin-bottom: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }
}

// 管理ツールを使用して確認を行った際に@media (max-width: 375px)では機能しなかったため376pxと定義
@media (max-width: 376px) {
  .user-posts__item {
    --user-post-font-main: 0.75rem;
    --user-post-font-sub: 0.675rem;
  }
}

@media (max-width: 320px) {
  .user-post-form {
    --user-post-form-font-main: 0.75rem;
    --user-post-form-font-sub: 0.7rem;
  }
}